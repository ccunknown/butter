{"version":3,"sources":["../src/clock_ctrl.js"],"names":["PanelCtrl","moment","panelDefaults","title","butter","butterType","label","on","method","url","headers","body","off","ClockCtrl","$scope","$injector","_","defaultsDeep","panel","headtxt","butterstate","edmShowButter","edmShowButterOn","edmShowButterOff","edmRequestIndex","events","onInitEditMode","bind","updateButter","init_edmShowButter","addEditorTab","index","console","log","tea","$timeout","splice","push","bindex","mode","headerkey","headervalue","undefined","len","length","reversebutter","i","sendRequest","then","JSON","stringify","data","catch","error","cindex","fetch","response","json","templateUrl"],"mappings":"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","file":"clock_ctrl.js","sourcesContent":["import {PanelCtrl} from 'app/plugins/sdk';\nimport moment from 'moment';\nimport './css/toggle-checkbox.css!';\n\nvar panelDefaults = {\n  title: 'Panel Title',\n  butter:[\n    {\n      butterType: 'on/off button',\n      label: 'Label 0',\n      on:[\n        {\n          method: 'PUT',\n          url: `https://httpillwww.mozilla-iot.org/things/http---192.168.43.62-things-lamp1/properties/on`,\n          headers:{\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n            'Authorization': 'Bearer eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImVkYWMzMWQzLWUxMjAtNGJiMy04NWQzLTdlNTYwOGNiNjBmMyJ9.eyJjbGllbnRfaWQiOiJsb2NhbC10b2tlbiIsInJvbGUiOiJhY2Nlc3NfdG9rZW4iLCJzY29wZSI6Ii90aGluZ3M6cmVhZHdyaXRlIiwiaWF0IjoxNTM2MjA4MzI5fQ.d1f9-4LE7KJTDr6b04xAynwHdGl_TZCYhQTsurYR4dPH5KFUXLpzwrUrokODzelam8M1EmemB_AYzVNC9dHyCw'\n          },\n          body:'{\"on\":true}'\n        },\n        {\n          method: 'PUT',\n          url: `https://httpillwww.mozilla-iot.org/things/http---192.168.43.62-things-lamp1/properties/level`,\n          headers:{\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n            'Authorization': 'Bearer eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImVkYWMzMWQzLWUxMjAtNGJiMy04NWQzLTdlNTYwOGNiNjBmMyJ9.eyJjbGllbnRfaWQiOiJsb2NhbC10b2tlbiIsInJvbGUiOiJhY2Nlc3NfdG9rZW4iLCJzY29wZSI6Ii90aGluZ3M6cmVhZHdyaXRlIiwiaWF0IjoxNTM2MjA4MzI5fQ.d1f9-4LE7KJTDr6b04xAynwHdGl_TZCYhQTsurYR4dPH5KFUXLpzwrUrokODzelam8M1EmemB_AYzVNC9dHyCw'\n          },\n          body:'{\"level\":65}'\n        }\n      ],\n      off:[\n        {\n          method: 'PUT',\n          url: `https://httpillwww.mozilla-iot.org/things/http---192.168.43.62-things-lamp1/properties/on`,\n          headers:{\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n            'Authorization': 'Bearer eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCIsImtpZCI6ImVkYWMzMWQzLWUxMjAtNGJiMy04NWQzLTdlNTYwOGNiNjBmMyJ9.eyJjbGllbnRfaWQiOiJsb2NhbC10b2tlbiIsInJvbGUiOiJhY2Nlc3NfdG9rZW4iLCJzY29wZSI6Ii90aGluZ3M6cmVhZHdyaXRlIiwiaWF0IjoxNTM2MjA4MzI5fQ.d1f9-4LE7KJTDr6b04xAynwHdGl_TZCYhQTsurYR4dPH5KFUXLpzwrUrokODzelam8M1EmemB_AYzVNC9dHyCw'\n          },\n          body:'{\"on\":false}'\n        }\n      ]\n    }\n  ]\n};\n\nexport class ClockCtrl extends PanelCtrl {\n\n  constructor($scope, $injector) {\n    super($scope, $injector);\n    _.defaultsDeep(this.panel, panelDefaults);\n    //this.updateClock();\n\n    this.headtxt = \"\";\n    this.butterstate = {};\n    this.edmShowButter = -1;\n    this.edmShowButterOn = false;\n    this.edmShowButterOff = false;\n    this.edmRequestIndex = -1;\n    //this.butter();\n\n    this.events.on('init-edit-mode', this.onInitEditMode.bind(this));\n    //this.events.on('panel-initialized', this.render.bind(this));\n\n    this.updateButter();\n  }\n\n  onInitEditMode(){\n    this.init_edmShowButter();\n    this.addEditorTab('Options', 'public/plugins/grafana-butter-panel/editor.html', 2);\n  }\n\n  init_edmShowButter(){\n    this.edmShowButter = -1;\n  }\n\n  edmToggleButter(index){\n    this.edmRequestIndex = -1;\n    this.edmShowButterOn = false;\n    this.edmShowButterOff = false;\n    if(this.edmShowButter == index)\n      this.edmShowButter = -1;\n    else\n      this.edmShowButter = index;\n    console.log(\"edmToggleButter > \"+this.edmShowButter);\n  }\n\n  edmToggleButterOn(){\n    this.edmRequestIndex = -1;\n    this.edmShowButterOn = !this.edmShowButterOn;\n    if(this.edmShowButterOn)\n      this.edmShowButterOff = false;\n    console.log(\"edmShowButterOn > \"+this.edmShowButterOn);\n  }\n\n  edmToggleButterOff(){\n    this.edmRequestIndex = -1;\n    this.edmShowButterOff = !this.edmShowButterOff;\n    if(this.edmShowButterOff)\n      this.edmShowButterOn = false;\n    console.log(\"edmShowButterOff > \"+this.edmShowButterOff);\n  }\n\n  edmToggleRequest(index){\n    if(this.edmRequestIndex == index){\n      this.edmRequestIndex = -1;\n    }\n    else{\n      this.edmRequestIndex = index;\n    }\n    console.log(\"edmRequestIndex > \"+this.edmRequestIndex);\n  }\n\n  updateButter() {\n    this.tea = \"Label : \"+this.headtxt;\n    this.$timeout(() => { this.updateButter(); }, 1000);\n  }\n\n  removeButter(index) {\n    console.log(\"Remove Butter \"+index);\n    this.panel.butter.splice(index, 1);\n  }\n\n  addButter(){\n    console.log(\"Add Butter \");\n    this.panel.butter.push(\n      {\n        butterType:'on/off button',\n        label:'',\n        on:[],\n        off:[]\n      });\n  }\n\n  addRequest(bindex, mode){\n    if(mode == 'on'){\n      console.log('Add new on request of butter'+bindex);\n      this.panel.butter[bindex].on.push(\n        {\n          method: 'GET',\n          url: '',\n          headers:{\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n            'Authorization': ''\n          },\n          body:''\n        }\n      );\n    }\n    else{\n      console.log('Add new off request of butter'+bindex);\n      this.panel.butter[bindex].off.push(\n        {\n          method: 'GET',\n          url: '',\n          headers:{\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n            'Authorization': ''\n          },\n          body:''\n        }\n      );\n    }\n  }\n\n  removeRequest(bindex, mode, index){\n    if(mode == 'on'){\n      console.log('Remove on request of butter'+bindex);\n      this.panel.butter[bindex].on.splice(index, 1);\n    }\n    else{\n      console.log('Remove off request of butter'+bindex);\n      this.panel.butter[bindex].off.splice(index, 1);\n    }\n  }\n\n  addRequestHeader(bindex, mode, index, headerkey, headervalue){\n    console.log(\"Add request header\");\n    console.log(\"> bindex : \"+bindex);\n    console.log(\"> mode : \"+mode);\n    console.log(\"> index : \"+index);\n    console.log(\"> headerkey : \"+headerkey);\n    console.log(\"> headervalue : \"+headervalue);\n\n    if(headerkey == undefined || headerkey == '')\n      return ;\n\n    if(mode == 'on')\n      this.panel.butter[bindex].on[index].headers[headerkey] = headervalue;\n    else\n      this.panel.butter[bindex].off[index].headers[headerkey] = headervalue;\n  }\n\n  removeRequestHeader(bindex, mode, index, headerkey){\n    console.log(\"Remove request header \"+index);\n    console.log(\"> bindex : \"+bindex);\n    console.log(\"> mode : \"+mode);\n    console.log(\"> index : \"+index);\n    console.log(\"> headerkey : \"+headerkey);\n\n    if(mode == 'on')\n      delete this.panel.butter[bindex].on[index].headers[headerkey];\n    else\n      delete this.panel.butter[bindex].off[index].headers[headerkey];\n  }\n\n  butter(bindex) {\n  // Default options are marked with *\n    console.log(\"Butter index : \"+bindex);\n\n    var len = 0;\n    if(this.butterstate[bindex])\n      len = this.panel.butter[bindex].on.length;\n    else\n      len = this.panel.butter[bindex].off.length;\n\n    var reversebutter = function(){\n      this.butterstate[bindex] = !this.butterstate[bindex];\n    }\n\n    for(var i=0;  i < len;  i++){\n      this.sendRequest(bindex,i)\n        .then(data => console.log(JSON.stringify(data)))\n        //.catch(error => console.error(error));\n        .catch(function(error){\n          console.error(error);\n          reversebutter();\n        });\n    }\n  }\n\n  sendRequest(bindex, cindex){\n    console.log(\"butterstatus : \"+this.butterstate[bindex]);\n    console.log(\"cindex : \"+cindex);\n\n    console.log(\"Make Request : \"+JSON.stringify(this.panel.butter[bindex].on[cindex]));\n    console.log(\"Default Request : \"+JSON.stringify(panelDefaults.butter[0].on[0]));\n    console.log(\"Body : \"+JSON.stringify(this.panel.butter[bindex].on[cindex].body));\n\n    if(this.butterstate[bindex]){\n      console.log(\"In true condition.\");\n      if(this.panel.butter[bindex].on[cindex].url == '')\n        return ;\n      return fetch(this.panel.butter[bindex].on[cindex].url, {\n        method: this.panel.butter[bindex].on[cindex].method, // *GET, POST, PUT, DELETE, etc.\n        headers: this.panel.butter[bindex].on[cindex].headers,\n        body: this.panel.butter[0].on[cindex].body // body data type must match \"Content-Type\" header\n        //body: JSON.stringify(data) // body data type must match \"Content-Type\" header\n      })\n      .then(response => response.json()); // parses response to JSON\n    }\n    else{\n      console.log(\"In false condition.\");\n      if(this.panel.butter[bindex].off[cindex].url == '')\n        return ;\n      return fetch(this.panel.butter[bindex].off[cindex].url, {\n        method: this.panel.butter[bindex].off[cindex].method, // *GET, POST, PUT, DELETE, etc.\n        headers: this.panel.butter[bindex].off[cindex].headers,\n        body: this.panel.butter[0].off[cindex].body // body data type must match \"Content-Type\" header\n      })\n      .then(response => response.json()); // parses response to JSON\n    }\n  }\n}\n\nClockCtrl.templateUrl = 'module.html';\n\n"]}